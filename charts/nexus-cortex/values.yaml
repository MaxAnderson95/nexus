# NEXUS Station Cortex (BFF) Chart Values

nameOverride: ""
fullnameOverride: ""
imagePullSecrets: []
managedBy: Helm
enableJSONLogging: false

# Cross-namespace configuration
global:
  namespaces:
    infra: nexus-infra
    power: nexus-power
    lifeSupport: nexus-life-support
    crew: nexus-crew
    docking: nexus-docking
    inventory: nexus-inventory
  services:
    postgres: postgres
    redis: redis
    power: power
    lifeSupport: life-support
    crew: crew
    docking: docking
    inventory: inventory
  ports:
    postgres: 5432
    redis: 6379
    services: 80

# Database configuration (cortex doesn't use DB directly but keep for consistency)
database:
  name: nexus_db
  username: nexus
  password: nexus_password

# OpenTelemetry configuration
otel:
  enabled: false
  sdkDisabled: false
  endpoint: "http://otel-collector:4317"
  protocol: "grpc"
  insecure: true

# Chaos engineering
chaos:
  level: none

replicaCount: 1
revisionHistoryLimit: 3

strategy:
  type: RollingUpdate
  rollingUpdate:
    maxUnavailable: 0%
    maxSurge: 100%

image:
  registry: "ghcr.io"
  repository: "maxanderson95/nexus/cortex"
  pullPolicy: Always
  tag: ""

podAnnotations: {}
podLabels: {}

service:
  type: ClusterIP
  port: 80
  containerPort: 8080

resources: {}

livenessProbe:
  httpGet:
    path: /actuator/health/liveness
    port: http
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 3
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /actuator/health/readiness
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  successThreshold: 1
  failureThreshold: 3

# Dash0 Monitoring custom resource (backend)
dash0Monitoring:
  enabled: false
  spec: {}

# Dash0 Website Monitoring (frontend)
# Set enabled: true and provide auth token to enable frontend RUM
dash0Frontend:
  enabled: false
  endpoint: "https://ingress.us-east-1.aws.dash0.com"
  environment: "production"
  # Optional: specify dataset (can also be configured via auth token permissions)
  dataset: ""
  # Auth token for Dash0 ingestion - should be provided via --set or secrets
  # Create a token at: https://app.dash0.com/settings/auth-tokens
  # Use a dedicated token with Ingesting permissions only
  authToken: ""
  # Alternative: reference a Kubernetes secret
  # authTokenSecret:
  #   name: dash0-frontend
  #   key: auth-token

env: []

# Additional Kubernetes resources to deploy alongside this chart
# Each item should be a complete Kubernetes resource manifest
extraResources: []
#  - apiVersion: v1
#    kind: ConfigMap
#    metadata:
#      name: extra-config
#    data:
#      key: value
