# -- Override the name of the chart
nameOverride: ""

# -- Override the full name of the release
fullnameOverride: ""

# -- Enable JSON structured logging (sets LOGGING_STRUCTURED_FORMAT_CONSOLE=logstash)
enableJSONLogging: false

# -- Value for the app.kubernetes.io/managed-by label across all resources
managedBy: "Helm"

# -- Image pull secrets for all components
imagePullSecrets: []

# OpenTelemetry configuration
# Three modes:
#   1. Dash0 (default): enabled=false, sdkDisabled=false - No OTEL env vars, Dash0 operator injects them
#   2. Disabled: sdkDisabled=true - Sets OTEL_SDK_DISABLED=true to prevent errors without a collector
#   3. Manual: enabled=true - Manually configure OTEL endpoint/protocol for custom collector
otel:
  # -- Enable manual OpenTelemetry configuration (set endpoint/protocol below)
  enabled: false
  # -- Disable the OpenTelemetry SDK entirely (for clusters without Dash0 or a collector)
  sdkDisabled: false
  # -- OTLP endpoint URL (only used when enabled=true)
  endpoint: "http://otel-collector:4317"
  # -- OTLP protocol: grpc or http/protobuf (only used when enabled=true)
  protocol: "grpc"
  # -- Use insecure connection (only used when enabled=true)
  insecure: true

# Chaos Engineering configuration
# Chaos levels affect all endpoints via ChaosInterceptor:
#   - none: 0% errors, 0ms latency (default)
#   - low: 5% errors, 200-500ms latency
#   - medium: 15% errors, 1-3s latency
#   - high: 30% errors, 3-8s latency
chaos:
  # -- Default chaos level applied to all services unless overridden
  default: "none"
  # -- Per-service chaos level overrides (leave empty to use default)
  cortex: ""
  docking: ""
  crew: ""
  lifeSupport: ""
  power: ""
  inventory: ""

# Cortex BFF service (includes frontend)
cortex:
  # -- Enable deployment of the Cortex component
  enabled: true

  # -- Number of Cortex pod replicas
  replicaCount: 1

  # -- Number of old ReplicaSets to retain for rollback
  revisionHistoryLimit: 3

  # -- Rolling update strategy for Cortex deployments
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0%
      maxSurge: 100%

  # -- Cortex container image configuration
  image:
    # -- Container registry hostname (empty uses Docker Hub)
    registry: "ghcr.io"
    # -- Repository path within the registry
    repository: "maxanderson95/nexus/cortex"
    # -- Image pull policy
    pullPolicy: Always
    # -- Image tag (defaults to chart appVersion if empty)
    tag: ""

  # -- Additional annotations to add to Cortex pods
  podAnnotations: {}

  # -- Additional labels to add to Cortex pods
  podLabels: {}

  # -- Cortex service configuration
  service:
    # -- Service type
    type: ClusterIP
    # -- Service port
    port: 80
    # -- Container port that the application listens on
    containerPort: 8080

  # -- Cortex container resource configuration
  resources:
    {}
    # requests:
    #   cpu: "100m"
    #   memory: "128Mi"
    # limits:
    #   cpu: "500m"
    #   memory: "512Mi"

  # -- Liveness probe configuration for the Cortex container
  livenessProbe:
    httpGet:
      path: /actuator/health/liveness
      port: http
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # -- Readiness probe configuration for the Cortex container
  readinessProbe:
    httpGet:
      path: /actuator/health/readiness
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 3

  # -- Additional environment variables for the Cortex container
  env: []

# Docking service
dockingService:
  # -- Enable deployment of the Docking Service component
  enabled: true

  # -- Number of Docking Service pod replicas
  replicaCount: 1

  # -- Number of old ReplicaSets to retain for rollback
  revisionHistoryLimit: 3

  # -- Rolling update strategy
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0%
      maxSurge: 100%

  # -- Container image configuration
  image:
    registry: "ghcr.io"
    repository: "maxanderson95/nexus/docking-service"
    pullPolicy: Always
    tag: ""

  # -- Additional annotations to add to pods
  podAnnotations: {}

  # -- Additional labels to add to pods
  podLabels: {}

  # -- Service configuration
  service:
    type: ClusterIP
    port: 80
    containerPort: 8080

  # -- Container resource configuration
  resources: {}

  # -- Liveness probe configuration
  livenessProbe:
    httpGet:
      path: /actuator/health/liveness
      port: http
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # -- Readiness probe configuration
  readinessProbe:
    httpGet:
      path: /actuator/health/readiness
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 3

  # -- Additional environment variables
  env: []

# Crew service
crewService:
  # -- Enable deployment of the Crew Service component
  enabled: true

  # -- Number of Crew Service pod replicas
  replicaCount: 1

  # -- Number of old ReplicaSets to retain for rollback
  revisionHistoryLimit: 3

  # -- Rolling update strategy
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0%
      maxSurge: 100%

  # -- Container image configuration
  image:
    registry: "ghcr.io"
    repository: "maxanderson95/nexus/crew-service"
    pullPolicy: Always
    tag: ""

  # -- Additional annotations to add to pods
  podAnnotations: {}

  # -- Additional labels to add to pods
  podLabels: {}

  # -- Service configuration
  service:
    type: ClusterIP
    port: 80
    containerPort: 8080

  # -- Container resource configuration
  resources: {}

  # -- Liveness probe configuration
  livenessProbe:
    httpGet:
      path: /actuator/health/liveness
      port: http
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # -- Readiness probe configuration
  readinessProbe:
    httpGet:
      path: /actuator/health/readiness
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 3

  # -- Additional environment variables
  env: []

# Life Support service
lifeSupportService:
  # -- Enable deployment of the Life Support Service component
  enabled: true

  # -- Number of Life Support Service pod replicas
  replicaCount: 1

  # -- Number of old ReplicaSets to retain for rollback
  revisionHistoryLimit: 3

  # -- Rolling update strategy
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0%
      maxSurge: 100%

  # -- Container image configuration
  image:
    registry: "ghcr.io"
    repository: "maxanderson95/nexus/life-support-service"
    pullPolicy: Always
    tag: ""

  # -- Additional annotations to add to pods
  podAnnotations: {}

  # -- Additional labels to add to pods
  podLabels: {}

  # -- Service configuration
  service:
    type: ClusterIP
    port: 80
    containerPort: 8080

  # -- Container resource configuration
  resources: {}

  # -- Liveness probe configuration
  livenessProbe:
    httpGet:
      path: /actuator/health/liveness
      port: http
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # -- Readiness probe configuration
  readinessProbe:
    httpGet:
      path: /actuator/health/readiness
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 3

  # -- Additional environment variables
  env: []

# Power service
powerService:
  # -- Enable deployment of the Power Service component
  enabled: true

  # -- Number of Power Service pod replicas
  replicaCount: 1

  # -- Number of old ReplicaSets to retain for rollback
  revisionHistoryLimit: 3

  # -- Rolling update strategy
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0%
      maxSurge: 100%

  # -- Container image configuration
  image:
    registry: "ghcr.io"
    repository: "maxanderson95/nexus/power-service"
    pullPolicy: Always
    tag: ""

  # -- Additional annotations to add to pods
  podAnnotations: {}

  # -- Additional labels to add to pods
  podLabels: {}

  # -- Service configuration
  service:
    type: ClusterIP
    port: 80
    containerPort: 8080

  # -- Container resource configuration
  resources: {}

  # -- Liveness probe configuration
  livenessProbe:
    httpGet:
      path: /actuator/health/liveness
      port: http
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # -- Readiness probe configuration
  readinessProbe:
    httpGet:
      path: /actuator/health/readiness
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 3

  # -- Additional environment variables
  env: []

# Inventory service
inventoryService:
  # -- Enable deployment of the Inventory Service component
  enabled: true

  # -- Number of Inventory Service pod replicas
  replicaCount: 1

  # -- Number of old ReplicaSets to retain for rollback
  revisionHistoryLimit: 3

  # -- Rolling update strategy
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0%
      maxSurge: 100%

  # -- Container image configuration
  image:
    registry: "ghcr.io"
    repository: "maxanderson95/nexus/inventory-service"
    pullPolicy: Always
    tag: ""

  # -- Additional annotations to add to pods
  podAnnotations: {}

  # -- Additional labels to add to pods
  podLabels: {}

  # -- Service configuration
  service:
    type: ClusterIP
    port: 80
    containerPort: 8080

  # -- Container resource configuration
  resources: {}

  # -- Liveness probe configuration
  livenessProbe:
    httpGet:
      path: /actuator/health/liveness
      port: http
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # -- Readiness probe configuration
  readinessProbe:
    httpGet:
      path: /actuator/health/readiness
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 3

  # -- Additional environment variables
  env: []

# PostgreSQL database
postgres:
  # -- Enable deployment of PostgreSQL
  enabled: true

  # -- Container image configuration
  image:
    registry: ""
    repository: "postgres"
    pullPolicy: IfNotPresent
    tag: "15-alpine"

  # -- Authentication configuration
  auth:
    database: "nexus"
    username: "nexus"
    password: "nexus_password"

  # -- Service configuration
  service:
    type: ClusterIP
    port: 5432

  # -- Persistence configuration
  persistence:
    enabled: true
    size: "10Gi"
    storageClass: ""

  # -- Container resource configuration
  resources: {}

# Redis cache
redis:
  # -- Enable deployment of Redis
  enabled: true

  # -- Container image configuration
  image:
    registry: ""
    repository: "redis"
    pullPolicy: IfNotPresent
    tag: "7-alpine"

  # -- Service configuration
  service:
    type: ClusterIP
    port: 6379

  # -- Container resource configuration
  resources: {}

# Load generator (optional)
loadGenerator:
  # -- Enable deployment of the Load Generator
  enabled: false

  # -- Container image configuration
  image:
    registry: "ghcr.io"
    repository: "maxanderson95/nexus/load-generator"
    pullPolicy: Always
    tag: ""

  # -- Number of simulated users
  users: 10

  # -- User spawn rate per second
  spawnRate: 1

  # -- Service configuration for the Locust web UI
  service:
    type: ClusterIP
    port: 8089
    containerPort: 8089

  # -- Container resource configuration
  resources: {}
